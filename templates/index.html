<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Monitoreo de Pozas</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    select { padding: 8px; font-size: 16px; }
    .info { margin-top: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
  </style>
</head>
<body>
  <h2>Seleccione una poza:</h2>

  <select id="pozaSelect">
    <option value="">-- Elegir --</option>
    {% for poza in pozas %}
      <option value="{{ poza }}">{{ poza }}</option>
    {% endfor %}
  </select>

  <div class="info" id="info"></div>

  <script>
    document.getElementById("pozaSelect").addEventListener("change", function() {
      const poza = this.value;
      const infoDiv = document.getElementById("info");
      infoDiv.innerHTML = "";

      if (poza) {
        fetch(`/poza/${encodeURIComponent(poza)}`)
          .then(response => response.json())
          .then(bombas => {
            if (bombas.length > 0) {
              let table = "<table><tr><th>Bomba</th><th>L/s</th><th>mÂ³/h</th></tr>";
              bombas.forEach(b => {
                table += `<tr><td>${b.BOMBA}</td><td>${b.LPS || ""}</td><td>${b.M3H || ""}</td></tr>`;
              });
              table += "</table>";
              infoDiv.innerHTML = table;
            } else {
              infoDiv.innerHTML = "<p>No hay datos disponibles para esta poza.</p>";
            }
          });
      }
    });
  </script>
</body>
</html>
